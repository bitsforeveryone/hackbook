---
- name: add homebrew taps
  homebrew_tap:
    name: "{{ item }}" 
    state: present
  with_items: "{{ homebrew_taps }}"

- name: install homebrew packages 
  homebrew:
    update_homebrew: yes
    name: "{{ item }}"
    state: present
  with_items: "{{ homebrew_packages }}"

- name: install hombrew cask apps
  homebrew_cask:
    name: "{{ item }}"
  with_items: "{{ homebrew_cask_apps }}"

- name: install pip packages
  pip: 
    name: "{{ item }}" 
    state: present
  with_items: "{{ pip_packages }}"

- name: install gem packages
  gem: 
    name: "{{ item }}" 
    state: present
  with_items: "{{ gem_packages }}"

- name: Remove all crap from Dock
  shell: dockutil --remove '{{ item }}'
  ignore_errors: true
  with_items: "{{ dockitems_to_remove }}"

- name: Check if items in dock exist
  shell: dockutil --find '{{ item.name }}' || dockutil --add '{{ item.path }}'
  with_items: "{{ dockitems_to_persist }}"

- name: Fix dock order
  shell: dockutil --move '{{ item.name }}' --position {{ item.pos }}
  with_items: "{{ dockitems_to_persist }}"

